-- 测试数据生成脚本（基于项目实际业务逻辑）
USE inventropy;

-- 1. 用户账号表测试数据（包含管理员和教师）
-- 注意：教师用户名格式为 NCHU + 手机号，密码为 123456（项目常量定义）
INSERT INTO tb_user_account (username, password, user_type) VALUES
('NCHU13900139001', '123456', 'user'), -- 教师1（张教授）
('NCHU13900139002', '123456', 'user'), -- 教师2（李副教授）
('NCHU13900139003', '123456', 'user'); -- 教师3（王讲师）

-- 2. 用户信息表测试数据（与用户账号表一一对应）
INSERT INTO tb_user_info (id, name, gender, age, phone, college) VALUES
(2, '张教授', 'M', 45, '13900139001', '计算机学院'), -- 教师1信息
(3, '李副教授', 'F', 38, '13900139002', '电子工程学院'), -- 教师2信息
(4, '王讲师', 'M', 32, '13900139003', '机械工程学院'); -- 教师3信息

-- 3. 项目表测试数据（包含不同状态的项目）
-- 注意：根据业务逻辑设置默认值：status=0（待审核）、remaining_funds=funds、reason="暂未审批"
INSERT INTO tb_project_info (project_name, project_type, applicant, applicant_id, funds, remaining_funds, content, start_time, deadline, update_time, status, reason) VALUES
-- 待审核项目（符合提交时的默认值）
('基于人工智能的图像识别系统研究', '科研项目', '张教授', 2, 50000.00, 50000.00, '本项目旨在研究基于深度学习的图像识别算法，提高识别准确率和速度。', '2024-01-15 09:00:00', '2024-12-31 23:59:59', '2024-01-15 09:00:00', 0, '暂未审批'),
('智能机器人运动控制技术研究', '科研项目', '王讲师', 4, 30000.00, 30000.00, '研究智能机器人的运动控制算法，实现更精准的运动控制。', '2024-02-01 09:00:00', '2024-11-30 23:59:59', '2024-02-01 09:00:00', 0, '暂未审批'),

-- 已驳回项目
('传统工艺数字化研究', '科研项目', '李副教授', 3, 20000.00, 20000.00, '研究传统工艺的数字化转型方法。', '2023-10-01 09:00:00', '2024-06-30 23:59:59', '2023-10-15 10:30:00', 1, '项目创新性不足，建议进一步完善研究方案。'),

-- 已逾期项目
('新能源汽车电池管理系统', '科研项目', '张教授', 2, 40000.00, 15000.00, '研究新能源汽车电池的智能管理系统，提高电池使用寿命。', '2023-03-01 09:00:00', '2023-12-31 23:59:59', '2023-12-31 23:59:59', 2, '项目已逾期'),

-- 进行中项目
('大数据分析平台开发', '科研项目', '李副教授', 3, 60000.00, 35000.00, '开发一套基于Hadoop的大数据分析平台，用于处理和分析海量数据。', '2023-09-01 09:00:00', '2024-08-31 23:59:59', '2024-05-10 14:20:00', 3, '项目进行中'),
('物联网智能家居系统', '科研项目', '王讲师', 4, 35000.00, 20000.00, '开发一套物联网智能家居系统，实现家居设备的远程控制和智能化管理。', '2023-11-01 09:00:00', '2024-10-31 23:59:59', '2024-05-10 14:20:00', 3, '项目进行中'),
('人工智能辅助教学系统', '教学改革', '张教授', 2, 25000.00, 10000.00, '开发一套人工智能辅助教学系统，提高教学效果和学生学习体验。', '2023-12-01 09:00:00', '2024-09-30 23:59:59', '2024-05-10 14:20:00', 3, '项目进行中'),

-- 已结项项目
('智能传感器网络研究', '科研项目', '李副教授', 3, 45000.00, 0.00, '研究智能传感器网络的组网技术和数据传输协议。', '2022-09-01 09:00:00', '2023-08-31 23:59:59', '2023-08-31 16:45:00', 4, '项目已结项'),
('云计算平台性能优化', '科研项目', '王讲师', 4, 50000.00, 0.00, '研究云计算平台的性能优化方法，提高资源利用率和系统响应速度。', '2022-10-01 09:00:00', '2023-09-30 23:59:59', '2023-09-30 15:30:00', 4, '项目已结项'),

-- 已废弃项目
('传统数据库优化研究', '科研项目', '张教授', 2, 30000.00, 30000.00, '研究传统关系型数据库的性能优化方法。', '2023-01-01 09:00:00', '2023-12-31 23:59:59', '2023-06-10 11:20:00', 5, '项目技术路线已过时，转为研究新型数据库技术。');

-- 4. 经费记录表测试数据（与项目关联）
INSERT INTO tb_funds_log (project_id, applicant_id, applied_funds, reason, status, applied_time, approver_id, comment, update_time) VALUES
-- 大数据分析平台开发（进行中，已审批通过）
(5, 3, 10000.00, '购买服务器设备', 2, '2023-10-05 10:00:00', 1, '同意申请', '2023-10-06 14:30:00'),
(5, 3, 15000.00, '购买软件许可证', 2, '2023-12-15 09:30:00', 1, '同意申请', '2023-12-16 10:15:00'),

-- 物联网智能家居系统（进行中，已审批通过和待审批）
(6, 4, 10000.00, '购买传感器设备', 2, '2023-12-01 11:20:00', 1, '同意申请', '2023-12-02 09:45:00'),
(6, 4, 5000.00, '购买开发板', 0, '2024-05-08 16:20:00', NULL, NULL, '2024-05-08 16:20:00'),

-- 人工智能辅助教学系统（进行中，已审批通过和驳回）
(7, 2, 10000.00, '购买教学软件', 2, '2024-01-10 10:30:00', 1, '同意申请', '2024-01-11 14:20:00'),
(7, 2, 5000.00, '购买教学设备', 1, '2024-04-20 15:10:00', 1, '设备型号不符合要求，建议重新选择', '2024-04-21 09:30:00'),

-- 智能传感器网络研究（已结项，所有经费已审批）
(8, 3, 20000.00, '购买传感器和测试设备', 2, '2022-10-05 09:15:00', 1, '同意申请', '2022-10-06 11:20:00'),
(8, 3, 25000.00, '支付论文发表费用和会议费用', 2, '2023-06-20 14:30:00', 1, '同意申请', '2023-06-21 10:15:00'),

-- 云计算平台性能优化（已结项，所有经费已审批）
(9, 4, 25000.00, '购买云服务资源', 2, '2022-11-15 09:30:00', 1, '同意申请', '2022-11-16 14:20:00'),
(9, 4, 25000.00, '支付专利申请费用', 2, '2023-07-10 10:15:00', 1, '同意申请', '2023-07-11 09:45:00'),

-- 基于人工智能的图像识别系统研究（待审核，经费申请待审批）
(1, 2, 20000.00, '购买GPU服务器', 0, '2024-05-10 16:45:00', NULL, NULL, '2024-05-10 16:45:00');

-- 5. 项目审批记录表测试数据（项目状态变更记录）
INSERT INTO tb_project_log (project_id, old_status, new_status, reason, create_time, approver_id) VALUES
-- 传统工艺数字化研究（已驳回）
(3, 0, 1, '项目创新性不足，建议进一步完善研究方案。', '2023-10-15 10:30:00', 1),

-- 大数据分析平台开发（进行中）
(5, 0, 3, '项目方案可行，同意立项。', '2023-09-15 14:20:00', 1),

-- 物联网智能家居系统（进行中）
(6, 0, 3, '项目具有实用价值，同意立项。', '2023-11-15 09:45:00', 1),

-- 人工智能辅助教学系统（进行中）
(7, 0, 3, '教学改革项目，同意立项。', '2023-12-15 10:15:00', 1),

-- 智能传感器网络研究（已结项）
(8, 0, 3, '项目方案完善，同意立项。', '2022-09-15 11:20:00', 1),
(8, 3, 4, '项目已完成所有研究内容，同意结项。', '2023-08-31 16:45:00', 1),

-- 云计算平台性能优化（已结项）
(9, 0, 3, '项目技术路线合理，同意立项。', '2022-10-15 14:30:00', 1),
(9, 3, 4, '项目已完成所有研究目标，同意结项。', '2023-09-30 15:30:00', 1),

-- 传统数据库优化研究（已废弃）
(10, 0, 3, '项目方案可行，同意立项。', '2023-01-15 09:30:00', 1),
(10, 3, 5, '项目技术路线已过时，建议转为研究新型数据库技术。', '2023-06-10 11:20:00', 1),

-- 新能源汽车电池管理系统（已逾期 - 由存储过程自动处理）
(4, 3, 2, '项目已逾期，自动变更状态', '2023-12-31 23:59:59', 1);

-- 查询生成的测试数据
SELECT '用户账号表数据：'
UNION ALL
SELECT username FROM tb_user_account;

SELECT '项目表数据数量：'
UNION ALL
SELECT COUNT(*) FROM tb_project_info;

SELECT '经费记录表数据数量：'
UNION ALL
SELECT COUNT(*) FROM tb_funds_log;

SELECT '项目审批记录表数据数量：'
UNION ALL
SELECT COUNT(*) FROM tb_project_log;